<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Introduction to FRP (part 1)</title>
  <meta name="description" content="Not long ago, I started working on a project that is built around Functional Reactive Programming. Even with a strong programming background I found it hard ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://zerously.com/2016/03/20/introduction-to-frp-pt1.html">
  <link rel="alternate" type="application/rss+xml" title="Mariano Abdala" href="http://zerously.com/feed.xml">

  <link rel="icon" type="image/png" href="/images/favicon_32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/images/favicon_16.png" sizes="16x16" />
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Mariano Abdala</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Introduction to FRP (part 1)</h1>
    <p class="post-meta"><time datetime="2016-03-20T11:33:20-03:00" itemprop="datePublished">Mar 20, 2016</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Not long ago, I started working on a project that is built around <em>Functional Reactive Programming</em>. Even with a strong programming background I found it hard at first to even grasp its most fundamental concepts. To make things worst, just as I was starting, <a href="https://github.com/ReactiveCocoa/ReactiveCocoa">ReactiveCocoa</a> 4 -the FRP framework of choice for said project- was launched with <strong>major</strong> changes, making it really hard to find good reference material. The ones I found were mostly about making a transition from <code class="highlighter-rouge">2.5</code> to <code class="highlighter-rouge">4.0</code>.</p>

<p>Here goes some key lessons I learnt the hard way, in the hope that someone in a similar situation as me will find it useful or someone who knows more will correct me if I’m wrong in my understanding of FRP under ReactiveCocoa.</p>

<h2 id="frp">FRP</h2>
<p>Funcional Reactive Programming is a programming paradigm like many others. The main result of its adoption is more readable code via the sustitution of state by higher level instructions.</p>

<p>The most common example for state is a register button that will be enabled when both the username and the password are valid, as long as the register button hasn’t been pressed already and we are registering the user via API.</p>

<p>What imperative programming will normally do is:<br />
1. Hook into the textfields’ <code class="highlighter-rouge">shouldChangeCharactersInRange:replacementString:</code> delegate method.<br />
2. Every time the text changes, check whether it’s valid or not.<br />
3. Check if the counterpart textfield’s text is valid.<br />
4. Check the <code class="highlighter-rouge">isRegistering</code> property is <code class="highlighter-rouge">false</code>.<br />
5. Enable the register button.<br />
6. Hook into the register button <code class="highlighter-rouge">UIControlEventTouchUpInside</code> event.<br />
7. When the register button is tapped collect the username and password values, call the register API and set the <code class="highlighter-rouge">isRegistering</code> property to <code class="highlighter-rouge">true</code>.</p>

<p>Now, this is what FRP programming will normally do:<br />
1. Bind the register button’s enabled property to <em>when both the username and the password are valid, as long as the register button hasn’t been pressed already and we aren’t registering the user via API</em>.</p>

<p>It sounds like I’m just repeating myself but that’s exactly what FRP lets you do, define each component’s behaviour in a very similar way to which you think about behaviour.</p>

<p>A different way to think about this is a spreadsheet. All a spreadsheet needs from the user is that each cell has either values or formulas. If a cell’s formula is <code class="highlighter-rouge">=A1+(AVG(B1:B10))</code> you don’t care about how or when you get the result. You can focus on <em>the formula</em>.</p>

<p>This has two main benefits:<br />
1. You write code in the same way as you think of it, as previously mentioned.<br />
2. Once the code is written, the behaviour is contained and complete in a few lines of code. Could be more -much more-, but it’ll be all at one place.</p>

<p>Let’s go over the components in FRP that will enable us to do such a thing.</p>

<h1 id="stream">Stream</h1>
<p>A <em>cell</em> in FRP is called a “Stream”.</p>

<p>You can think of a stream as the history, past, present and future of a property in the sense that they are self contained and inmutable in time; like a river with all it’s water, but you are seeing just one part of it.</p>

<p>What triggers the river to move? Events.</p>

<p>Those events are mostly changes, like temperature was 21º and now it’s 25º but could also be something like finishing serving a customer and wanting the next to come to the counter.</p>

<p><em>NOTE: Streams are often called or represented by Signals, which is a terrible name since they get easily confused with events. You could think of a signal as a semaphore’s light changing<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> from green to red, but in FRP a signal is the semaphore itself.</em></p>

<h1 id="bindings">Bindings</h1>
<p>What’s the use of a stream if we can’t bind it somewhere?</p>

<p>What can we bind to a stream? Almost any property, and you know what’s cool? FRP Properties have streams themselves. So you can bind a stream into a property and another property to the first property’s stream.</p>

<h1 id="tranformations">Tranformations</h1>
<p>A big component of FRP is transformations, they are the <em>formula</em> in our cell.</p>

<p>We may have a stream of <code class="highlighter-rouge">string</code>s but need to bind them to a <code class="highlighter-rouge">bool</code> property, for instance, enabling a button if a property’s text is larger than 4 chars.</p>

<p>Transformations transform streams into streams, not into values.</p>

<h1 id="chaining">Chaining</h1>
<p>This is the <em>Functional</em> part in Functional Reactive Programming. And it’s available all accorss frameworks that you can chain as many streams, streams transformations and streams combinations (which is a kind of transformation) as you want.</p>

<p>If you are comfortable with Functional Programming there’s not much more explanation needed.</p>

<h1 id="hot-and-cold-signals">Hot and Cold signals</h1>
<p>This is a fairly important difference, ignoring it could trigger lots of issues.</p>

<p>You’ll find many <em>fancy</em> and more correct definitions than this one, but the key part is what happens when you bind a stream to a property:<br />
If you get the current value (which was set in the past) alongside with whichever new values are set in the future binded into your property then you are using a <strong>cold signal</strong>.<br />
If you only start getting the new values (whichever are set in the future) binded into your property then you are using a <strong>hot signal</strong>.</p>

<p>This also applies to <em>events</em>. A cold signal could be a bank queue that opens up and right away gets a new customer, if any. Whereas a hot signal could be a catastrophe prevention system, you only want to start the siren when the next warning comes in, regardless of whether there was one in the past.</p>

<h1 id="next">Next</h1>
<p><a href="/2016/03/24/introduction-to-frp-pt2.html">Part 2</a>: How to implement these concepts in ReactiveCocoa 4.<br />
<a href="/2016/04/03/introduction-to-frp-pt3.html">Part 3</a>: Applied networking with ReactiveCocoa 4.</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>New Oxford American Dictionary: <strong>signal</strong> |ˈsiɡnəl| (noun) • an event or statement that provides the impulse or occasion for something specified to happen: the champion’s announcement that he was retiring was the signal for scores of journalists to gather at his last match. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Mariano Abdala</li>
          <li><a href="mailto:mariano@zerously.com">mariano@zerously.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/marianoabdala"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">marianoabdala</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/marianoabdala"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">marianoabdala</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writings of Mariano Abdala. iOS Developer, host at <a href="https://twitter.com/nscoderba">@NSCoderBA</a> and organizer at <a href="https://twitter.com/nsconfarg">@NSConfArg</a>.</p>
      </div>
    </div>

  </div>

</footer>


    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-17657932-1', 'auto');
      ga('send', 'pageview');

    </script>
  </body>

</html>
